---
layout: base.njk
---

<article class="item-detail">
  <div class="item-hero">
    <h1 class="item-title">{{ title }}</h1>
    {% if shortDescription %}
      <p class="item-subtitle">{{ shortDescription }}</p>
    {% endif %}

    <div class="item-meta">
      <div class="item-meta-section">
        <h3>Published</h3>
        <p>{{ date | dateDisplay }}</p>
      </div>

      {% if team.length > 0 %}
      <div class="item-meta-section">
        <h3>Team</h3>
        <div class="item-team">
          {% for member in team %}
            <span class="team-member">{{ member }}</span>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      {% if link %}
      <div class="item-meta-section">
        <h3>Link</h3>
        <div class="item-link">
          <a href="{{ link }}" {% if linkExternal %}target="_blank" rel="noopener"{% endif %} class="external-link-meta">
            {{ link }}
            {% if linkExternal %}
              <span class="link-icon">↗</span>
            {% endif %}
          </a>
        </div>
      </div>
      {% endif %}
    </div>

    {% if images and images.length > 0 %}
      <div class="item-images">
        <div class="image-carousel" data-carousel>
          {% for image in images %}
            {% if image.endsWith('.mp4') or image.endsWith('.webm') or image.endsWith('.mov') %}
              <video class="carousel-image" controls>
                <source src="{{ environment.baseUrl }}{{ image }}" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            {% else %}
              {% safeImage "./src" + image, title + " - Image " + loop.index %}
            {% endif %}
          {% endfor %}
        </div>
        {% if images.length > 1 %}
        <button class="carousel-arrow carousel-prev" aria-label="Previous image">‹</button>
        <button class="carousel-arrow carousel-next" aria-label="Next image">›</button>
        <div class="carousel-nav">
          {% for image in images %}
            <button class="carousel-dot{% if loop.first %} active{% endif %}"
                    data-slide="{{ loop.index0 }}"
                    aria-label="Go to slide {{ loop.index }}"></button>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    {% elif coverImage %}
      {% safeImage "./src" + coverImage, title %}
    {% endif %}
  </div>

  <div class="item-body">
    {{ content | safe }}
  </div>
</article>